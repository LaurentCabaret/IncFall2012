C51 COMPILER V9.03   BASEF330MASTER                                                        09/22/2012 00:37:49 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE BASEF330MASTER
OBJECT MODULE PLACED IN BaseF330Master.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe BaseF330Master.c DB OE BR INCDIR(C:\SiLabs\MCU\Inc)

line level    source

   1          //-----------------------------------------------------------------------------
   2          // F33x_SMBus_Master_Multibyte.c
   3          //-----------------------------------------------------------------------------
   4          
   5          //-----------------------------------------------------------------------------
   6          // Includes
   7          //-----------------------------------------------------------------------------
   8          
   9          
  10          #include "I2CLib.h"
  11          #include "UARTLIB.h"
  12          #include "KmodGPS.h"
  13          #include "KmodACL.h"
  14          
  15          //-----------------------------------------------------------------------------
  16          // Global VARIABLES
  17          //-----------------------------------------------------------------------------
  18          
  19          sbit LED = P1^3;                       // LED on port P1.3
  20          // Buffers for data from the slave module
  21          char Date[SIZE_GETDATE];
  22          char Latitude[SIZE_GETLAT];
  23          char Longitude[SIZE_GETLONG];
  24          int AccX,AccY,AccZ;
  25          
  26          //-----------------------------------------------------------------------------
  27          // MAIN Routine
  28          //-----------------------------------------------------------------------------
  29          //
  30          // Main routine performs all configuration tasks, then loops forever sending
  31          // and receiving SMBus data to the slave.
  32          //
  33          
  34          void main (void)
  35          {
  36   1        int id;
  37   1        
  38   1        SysInit();     
  39   1        
  40   1        // Reset Error Counter
  41   1       LED = 1;
  42   1        StartACC();
  43   1        id = GetAccID();
  44   1        
  45   1        while (1) {
  46   2          SendWord("Attente d'une consigne de position\n",35);
  47   2          LED = 1;
  48   2          SendWord("Récupération de l'ID\n",21);
  49   2          id = getID();
  50   2          if (id == 42) {
  51   3            SendWord("Id Ok\n",6);
  52   3            LED = 0;
  53   3            T0_Waitms(50000);
  54   3          }
  55   2          if (id == -1) {
C51 COMPILER V9.03   BASEF330MASTER                                                        09/22/2012 00:37:49 PAGE 2   

  56   3            LED = 0;
  57   3            T0_Waitms (100);
  58   3            SendWord("Id Error\n",9);
  59   3          }
  60   2          
  61   2          GetDate();
  62   2          GetLatitude();
  63   2          GetLongitude();
  64   2          SendCoords();
  65   2          GetAccX();
  66   2          SendChar((AccX/256));
  67   2          SendChar((AccY/256));
  68   2          SendChar((AccZ/256));
  69   2          
  70   2          T0_Waitms (10000);
  71   2        }
  72   1        
  73   1        
  74   1        
  75   1      }
  76          
  77          //-----------------------------------------------------------------------------
  78          // End Of File
  79          //-----------------------------------------------------------------------------


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    173    ----
   CONSTANT SIZE    =     75    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     40       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
